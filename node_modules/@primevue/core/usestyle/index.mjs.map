{"version":3,"file":"index.mjs","sources":["../../src/usestyle/UseStyle.js"],"sourcesContent":["/*\n * Ported from useStyleTag in @vueuse/core\n * https://github.com/vueuse\n */\nimport { DomHandler } from '@primevue/core/utils';\nimport { getCurrentInstance, nextTick, onMounted, readonly, ref, watch } from 'vue';\n\nfunction tryOnMounted(fn, sync = true) {\n    if (getCurrentInstance()) onMounted(fn);\n    else if (sync) fn();\n    else nextTick(fn);\n}\n\nlet _id = 0;\n\nexport function useStyle(css, options = {}) {\n    const isLoaded = ref(false);\n    const cssRef = ref(css);\n    const styleRef = ref(null);\n\n    const defaultDocument = DomHandler.isClient() ? window.document : undefined;\n    const {\n        document = defaultDocument,\n        immediate = true,\n        manual = false,\n        name = `style_${++_id}`,\n        id = undefined,\n        media = undefined,\n        nonce = undefined,\n        first = false,\n        onMounted: onStyleMounted = undefined,\n        onUpdated: onStyleUpdated = undefined,\n        onLoad: onStyleLoaded = undefined,\n        props = {}\n    } = options;\n\n    let stop = () => {};\n\n    /* @todo: Improve _options params */\n    const load = (_css, _props = {}) => {\n        if (!document) return;\n\n        const _styleProps = { ...props, ..._props };\n        const [_name, _id, _nonce] = [_styleProps.name || name, _styleProps.id || id, _styleProps.nonce || nonce];\n\n        styleRef.value = document.querySelector(`style[data-primevue-style-id=\"${_name}\"]`) || document.getElementById(_id) || document.createElement('style');\n\n        if (!styleRef.value.isConnected) {\n            cssRef.value = _css || css;\n\n            DomHandler.setAttributes(styleRef.value, {\n                type: 'text/css',\n                id: _id,\n                media,\n                nonce: _nonce\n            });\n            first ? document.head.prepend(styleRef.value) : document.head.appendChild(styleRef.value);\n            DomHandler.setAttribute(styleRef.value, 'data-primevue-style-id', _name);\n            DomHandler.setAttributes(styleRef.value, _styleProps);\n            styleRef.value.onload = (event) => onStyleLoaded?.(event, { name: _name });\n            onStyleMounted?.(_name);\n        }\n\n        if (isLoaded.value) return;\n\n        stop = watch(\n            cssRef,\n            (value) => {\n                styleRef.value.textContent = value;\n                onStyleUpdated?.(_name);\n            },\n            { immediate: true }\n        );\n\n        isLoaded.value = true;\n    };\n\n    const unload = () => {\n        if (!document || !isLoaded.value) return;\n        stop();\n        DomHandler.isExist(styleRef.value) && document.head.removeChild(styleRef.value);\n        isLoaded.value = false;\n    };\n\n    if (immediate && !manual) tryOnMounted(load);\n\n    /*if (!manual)\n      tryOnScopeDispose(unload)*/\n\n    return {\n        id,\n        name,\n        el: styleRef,\n        css: cssRef,\n        unload,\n        load,\n        isLoaded: readonly(isLoaded)\n    };\n}\n"],"names":["tryOnMounted","fn","sync","arguments","length","undefined","getCurrentInstance","onMounted","nextTick","_id","useStyle","css","options","isLoaded","ref","cssRef","styleRef","defaultDocument","DomHandler","isClient","window","document","_options$document","_options$immediate","immediate","_options$manual","manual","_options$name","name","concat","_options$id","id","_options$media","media","_options$nonce","nonce","_options$first","first","_options$onMounted","onStyleMounted","_options$onUpdated","onUpdated","onStyleUpdated","_options$onLoad","onLoad","onStyleLoaded","_options$props","props","stop","load","_css","_props","_styleProps","_objectSpread","_name","_nonce","value","querySelector","getElementById","createElement","isConnected","setAttributes","type","head","prepend","appendChild","setAttribute","onload","event","watch","textContent","unload","isExist","removeChild","el","readonly"],"mappings":"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"}