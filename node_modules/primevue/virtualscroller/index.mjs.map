{"version":3,"file":"index.mjs","sources":["../../src/virtualscroller/BaseVirtualScroller.vue","../../src/virtualscroller/VirtualScroller.vue","../../src/virtualscroller/VirtualScroller.vue?vue&type=template&id=5ebac092&lang.js"],"sourcesContent":["<script>\nimport BaseComponent from '@primevue/core/basecomponent';\nimport VirtualScrollerStyle from 'primevue/virtualscroller/style';\n\nexport default {\n    name: 'BaseVirtualScroller',\n    extends: BaseComponent,\n    props: {\n        id: {\n            type: String,\n            default: null\n        },\n        style: null,\n        class: null,\n        items: {\n            type: Array,\n            default: null\n        },\n        itemSize: {\n            type: [Number, Array],\n            default: 0\n        },\n        scrollHeight: null,\n        scrollWidth: null,\n        orientation: {\n            type: String,\n            default: 'vertical'\n        },\n        numToleratedItems: {\n            type: Number,\n            default: null\n        },\n        delay: {\n            type: Number,\n            default: 0\n        },\n        resizeDelay: {\n            type: Number,\n            default: 10\n        },\n        lazy: {\n            type: Boolean,\n            default: false\n        },\n        disabled: {\n            type: Boolean,\n            default: false\n        },\n        loaderDisabled: {\n            type: Boolean,\n            default: false\n        },\n        columns: {\n            type: Array,\n            default: null\n        },\n        loading: {\n            type: Boolean,\n            default: false\n        },\n        showSpacer: {\n            type: Boolean,\n            default: true\n        },\n        showLoader: {\n            type: Boolean,\n            default: false\n        },\n        tabindex: {\n            type: Number,\n            default: 0\n        },\n        inline: {\n            type: Boolean,\n            default: false\n        },\n        step: {\n            type: Number,\n            default: 0\n        },\n        appendOnly: {\n            type: Boolean,\n            default: false\n        },\n        autoSize: {\n            type: Boolean,\n            default: false\n        }\n    },\n    style: VirtualScrollerStyle,\n    provide() {\n        return {\n            $pcVirtualScroller: this,\n            $parentInstance: this\n        };\n    },\n    beforeMount() {\n        VirtualScrollerStyle.loadCSS({ nonce: this.$primevueConfig?.csp?.nonce });\n    }\n};\n</script>\n","<template>\n    <template v-if=\"!disabled\">\n        <div :ref=\"elementRef\" :class=\"containerClass\" :tabindex=\"tabindex\" :style=\"style\" @scroll=\"onScroll\" v-bind=\"ptmi('root')\">\n            <slot\n                name=\"content\"\n                :styleClass=\"contentClass\"\n                :items=\"loadedItems\"\n                :getItemOptions=\"getOptions\"\n                :loading=\"d_loading\"\n                :getLoaderOptions=\"getLoaderOptions\"\n                :itemSize=\"itemSize\"\n                :rows=\"loadedRows\"\n                :columns=\"loadedColumns\"\n                :contentRef=\"contentRef\"\n                :spacerStyle=\"spacerStyle\"\n                :contentStyle=\"contentStyle\"\n                :vertical=\"isVertical()\"\n                :horizontal=\"isHorizontal()\"\n                :both=\"isBoth()\"\n            >\n                <div :ref=\"contentRef\" :class=\"contentClass\" :style=\"contentStyle\" v-bind=\"ptm('content')\">\n                    <template v-for=\"(item, index) of loadedItems\" :key=\"index\">\n                        <slot name=\"item\" :item=\"item\" :options=\"getOptions(index)\"></slot>\n                    </template>\n                </div>\n            </slot>\n            <div v-if=\"showSpacer\" class=\"p-virtualscroller-spacer\" :style=\"spacerStyle\" v-bind=\"ptm('spacer')\"></div>\n            <div v-if=\"!loaderDisabled && showLoader && d_loading\" :class=\"loaderClass\" v-bind=\"ptm('loader')\">\n                <template v-if=\"$slots && $slots.loader\">\n                    <template v-for=\"(_, index) of loaderArr\" :key=\"index\">\n                        <slot name=\"loader\" :options=\"getLoaderOptions(index, isBoth() && { numCols: d_numItemsInViewport.cols })\"></slot>\n                    </template>\n                </template>\n                <slot name=\"loadingicon\">\n                    <SpinnerIcon spin class=\"p-virtualscroller-loading-icon\" v-bind=\"ptm('loadingIcon')\" />\n                </slot>\n            </div>\n        </div>\n    </template>\n    <template v-else>\n        <slot></slot>\n        <slot name=\"content\" :items=\"items\" :rows=\"items\" :columns=\"loadedColumns\"></slot>\n    </template>\n</template>\n\n<script>\nimport { DomHandler } from '@primevue/core/utils';\nimport SpinnerIcon from '@primevue/icons/spinner';\nimport BaseVirtualScroller from './BaseVirtualScroller.vue';\n\nexport default {\n    name: 'VirtualScroller',\n    extends: BaseVirtualScroller,\n    inheritAttrs: false,\n    emits: ['update:numToleratedItems', 'scroll', 'scroll-index-change', 'lazy-load'],\n    data() {\n        const both = this.isBoth();\n\n        return {\n            first: both ? { rows: 0, cols: 0 } : 0,\n            last: both ? { rows: 0, cols: 0 } : 0,\n            page: both ? { rows: 0, cols: 0 } : 0,\n            numItemsInViewport: both ? { rows: 0, cols: 0 } : 0,\n            lastScrollPos: both ? { top: 0, left: 0 } : 0,\n            d_numToleratedItems: this.numToleratedItems,\n            d_loading: this.loading,\n            loaderArr: [],\n            spacerStyle: {},\n            contentStyle: {}\n        };\n    },\n    element: null,\n    content: null,\n    lastScrollPos: null,\n    scrollTimeout: null,\n    resizeTimeout: null,\n    defaultWidth: 0,\n    defaultHeight: 0,\n    defaultContentWidth: 0,\n    defaultContentHeight: 0,\n    isRangeChanged: false,\n    lazyLoadState: {},\n    resizeListener: null,\n    initialized: false,\n    watch: {\n        numToleratedItems(newValue) {\n            this.d_numToleratedItems = newValue;\n        },\n        loading(newValue, oldValue) {\n            if (this.lazy && newValue !== oldValue && newValue !== this.d_loading) {\n                this.d_loading = newValue;\n            }\n        },\n        items(newValue, oldValue) {\n            if (!oldValue || oldValue.length !== (newValue || []).length) {\n                this.init();\n                this.calculateAutoSize();\n            }\n        },\n        itemSize() {\n            this.init();\n            this.calculateAutoSize();\n        },\n        orientation() {\n            this.lastScrollPos = this.isBoth() ? { top: 0, left: 0 } : 0;\n        },\n        scrollHeight() {\n            this.init();\n            this.calculateAutoSize();\n        },\n        scrollWidth() {\n            this.init();\n            this.calculateAutoSize();\n        }\n    },\n    mounted() {\n        this.viewInit();\n\n        this.lastScrollPos = this.isBoth() ? { top: 0, left: 0 } : 0;\n        this.lazyLoadState = this.lazyLoadState || {};\n    },\n    updated() {\n        !this.initialized && this.viewInit();\n    },\n    unmounted() {\n        this.unbindResizeListener();\n\n        this.initialized = false;\n    },\n    methods: {\n        viewInit() {\n            if (DomHandler.isVisible(this.element)) {\n                this.setContentEl(this.content);\n                this.init();\n                this.calculateAutoSize();\n                this.bindResizeListener();\n\n                this.defaultWidth = DomHandler.getWidth(this.element);\n                this.defaultHeight = DomHandler.getHeight(this.element);\n                this.defaultContentWidth = DomHandler.getWidth(this.content);\n                this.defaultContentHeight = DomHandler.getHeight(this.content);\n                this.initialized = true;\n            }\n        },\n        init() {\n            if (!this.disabled) {\n                this.setSize();\n                this.calculateOptions();\n                this.setSpacerSize();\n            }\n        },\n        isVertical() {\n            return this.orientation === 'vertical';\n        },\n        isHorizontal() {\n            return this.orientation === 'horizontal';\n        },\n        isBoth() {\n            return this.orientation === 'both';\n        },\n        scrollTo(options) {\n            //this.lastScrollPos = this.both ? { top: 0, left: 0 } : 0;\n            this.element && this.element.scrollTo(options);\n        },\n        scrollToIndex(index, behavior = 'auto') {\n            const both = this.isBoth();\n            const horizontal = this.isHorizontal();\n            const valid = both ? index.every((i) => i > -1) : index > -1;\n\n            if (valid) {\n                const first = this.first;\n                const { scrollTop = 0, scrollLeft = 0 } = this.element;\n                const { numToleratedItems } = this.calculateNumItems();\n                const contentPos = this.getContentPosition();\n                const itemSize = this.itemSize;\n                const calculateFirst = (_index = 0, _numT) => (_index <= _numT ? 0 : _index);\n                const calculateCoord = (_first, _size, _cpos) => _first * _size + _cpos;\n                const scrollTo = (left = 0, top = 0) => this.scrollTo({ left, top, behavior });\n                let newFirst = both ? { rows: 0, cols: 0 } : 0;\n                let isRangeChanged = false,\n                    isScrollChanged = false;\n\n                if (both) {\n                    newFirst = { rows: calculateFirst(index[0], numToleratedItems[0]), cols: calculateFirst(index[1], numToleratedItems[1]) };\n                    scrollTo(calculateCoord(newFirst.cols, itemSize[1], contentPos.left), calculateCoord(newFirst.rows, itemSize[0], contentPos.top));\n                    isScrollChanged = this.lastScrollPos.top !== scrollTop || this.lastScrollPos.left !== scrollLeft;\n                    isRangeChanged = newFirst.rows !== first.rows || newFirst.cols !== first.cols;\n                } else {\n                    newFirst = calculateFirst(index, numToleratedItems);\n                    horizontal ? scrollTo(calculateCoord(newFirst, itemSize, contentPos.left), scrollTop) : scrollTo(scrollLeft, calculateCoord(newFirst, itemSize, contentPos.top));\n                    isScrollChanged = this.lastScrollPos !== (horizontal ? scrollLeft : scrollTop);\n                    isRangeChanged = newFirst !== first;\n                }\n\n                this.isRangeChanged = isRangeChanged;\n                isScrollChanged && (this.first = newFirst);\n            }\n        },\n        scrollInView(index, to, behavior = 'auto') {\n            if (to) {\n                const both = this.isBoth();\n                const horizontal = this.isHorizontal();\n                const valid = both ? index.every((i) => i > -1) : index > -1;\n\n                if (valid) {\n                    const { first, viewport } = this.getRenderedRange();\n                    const scrollTo = (left = 0, top = 0) => this.scrollTo({ left, top, behavior });\n                    const isToStart = to === 'to-start';\n                    const isToEnd = to === 'to-end';\n\n                    if (isToStart) {\n                        if (both) {\n                            if (viewport.first.rows - first.rows > index[0]) {\n                                scrollTo(viewport.first.cols * this.itemSize[1], (viewport.first.rows - 1) * this.itemSize[0]);\n                            } else if (viewport.first.cols - first.cols > index[1]) {\n                                scrollTo((viewport.first.cols - 1) * this.itemSize[1], viewport.first.rows * this.itemSize[0]);\n                            }\n                        } else {\n                            if (viewport.first - first > index) {\n                                const pos = (viewport.first - 1) * this.itemSize;\n\n                                horizontal ? scrollTo(pos, 0) : scrollTo(0, pos);\n                            }\n                        }\n                    } else if (isToEnd) {\n                        if (both) {\n                            if (viewport.last.rows - first.rows <= index[0] + 1) {\n                                scrollTo(viewport.first.cols * this.itemSize[1], (viewport.first.rows + 1) * this.itemSize[0]);\n                            } else if (viewport.last.cols - first.cols <= index[1] + 1) {\n                                scrollTo((viewport.first.cols + 1) * this.itemSize[1], viewport.first.rows * this.itemSize[0]);\n                            }\n                        } else {\n                            if (viewport.last - first <= index + 1) {\n                                const pos = (viewport.first + 1) * this.itemSize;\n\n                                horizontal ? scrollTo(pos, 0) : scrollTo(0, pos);\n                            }\n                        }\n                    }\n                }\n            } else {\n                this.scrollToIndex(index, behavior);\n            }\n        },\n        getRenderedRange() {\n            const calculateFirstInViewport = (_pos, _size) => Math.floor(_pos / (_size || _pos));\n\n            let firstInViewport = this.first;\n            let lastInViewport = 0;\n\n            if (this.element) {\n                const both = this.isBoth();\n                const horizontal = this.isHorizontal();\n                const { scrollTop, scrollLeft } = this.element;\n\n                if (both) {\n                    firstInViewport = { rows: calculateFirstInViewport(scrollTop, this.itemSize[0]), cols: calculateFirstInViewport(scrollLeft, this.itemSize[1]) };\n                    lastInViewport = { rows: firstInViewport.rows + this.numItemsInViewport.rows, cols: firstInViewport.cols + this.numItemsInViewport.cols };\n                } else {\n                    const scrollPos = horizontal ? scrollLeft : scrollTop;\n\n                    firstInViewport = calculateFirstInViewport(scrollPos, this.itemSize);\n                    lastInViewport = firstInViewport + this.numItemsInViewport;\n                }\n            }\n\n            return {\n                first: this.first,\n                last: this.last,\n                viewport: {\n                    first: firstInViewport,\n                    last: lastInViewport\n                }\n            };\n        },\n        calculateNumItems() {\n            const both = this.isBoth();\n            const horizontal = this.isHorizontal();\n            const itemSize = this.itemSize;\n            const contentPos = this.getContentPosition();\n            const contentWidth = this.element ? this.element.offsetWidth - contentPos.left : 0;\n            const contentHeight = this.element ? this.element.offsetHeight - contentPos.top : 0;\n            const calculateNumItemsInViewport = (_contentSize, _itemSize) => Math.ceil(_contentSize / (_itemSize || _contentSize));\n            const calculateNumToleratedItems = (_numItems) => Math.ceil(_numItems / 2);\n            const numItemsInViewport = both\n                ? { rows: calculateNumItemsInViewport(contentHeight, itemSize[0]), cols: calculateNumItemsInViewport(contentWidth, itemSize[1]) }\n                : calculateNumItemsInViewport(horizontal ? contentWidth : contentHeight, itemSize);\n\n            const numToleratedItems = this.d_numToleratedItems || (both ? [calculateNumToleratedItems(numItemsInViewport.rows), calculateNumToleratedItems(numItemsInViewport.cols)] : calculateNumToleratedItems(numItemsInViewport));\n\n            return { numItemsInViewport, numToleratedItems };\n        },\n        calculateOptions() {\n            const both = this.isBoth();\n            const first = this.first;\n            const { numItemsInViewport, numToleratedItems } = this.calculateNumItems();\n            const calculateLast = (_first, _num, _numT, _isCols = false) => this.getLast(_first + _num + (_first < _numT ? 2 : 3) * _numT, _isCols);\n            const last = both\n                ? { rows: calculateLast(first.rows, numItemsInViewport.rows, numToleratedItems[0]), cols: calculateLast(first.cols, numItemsInViewport.cols, numToleratedItems[1], true) }\n                : calculateLast(first, numItemsInViewport, numToleratedItems);\n\n            this.last = last;\n            this.numItemsInViewport = numItemsInViewport;\n            this.d_numToleratedItems = numToleratedItems;\n            this.$emit('update:numToleratedItems', this.d_numToleratedItems);\n\n            if (this.showLoader) {\n                this.loaderArr = both ? Array.from({ length: numItemsInViewport.rows }).map(() => Array.from({ length: numItemsInViewport.cols })) : Array.from({ length: numItemsInViewport });\n            }\n\n            if (this.lazy) {\n                Promise.resolve().then(() => {\n                    this.lazyLoadState = {\n                        first: this.step ? (both ? { rows: 0, cols: first.cols } : 0) : first,\n                        last: Math.min(this.step ? this.step : last, this.items?.length || 0)\n                    };\n\n                    this.$emit('lazy-load', this.lazyLoadState);\n                });\n            }\n        },\n        calculateAutoSize() {\n            if (this.autoSize && !this.d_loading) {\n                Promise.resolve().then(() => {\n                    if (this.content) {\n                        const both = this.isBoth();\n                        const horizontal = this.isHorizontal();\n                        const vertical = this.isVertical();\n\n                        this.content.style.minHeight = this.content.style.minWidth = 'auto';\n                        this.content.style.position = 'relative';\n                        this.element.style.contain = 'none';\n\n                        /*const [contentWidth, contentHeight] = [DomHandler.getWidth(this.content), DomHandler.getHeight(this.content)];\n\n                        contentWidth !== this.defaultContentWidth && (this.element.style.width = '');\n                        contentHeight !== this.defaultContentHeight && (this.element.style.height = '');*/\n\n                        const [width, height] = [DomHandler.getWidth(this.element), DomHandler.getHeight(this.element)];\n\n                        (both || horizontal) && (this.element.style.width = width < this.defaultWidth ? width + 'px' : this.scrollWidth || this.defaultWidth + 'px');\n                        (both || vertical) && (this.element.style.height = height < this.defaultHeight ? height + 'px' : this.scrollHeight || this.defaultHeight + 'px');\n\n                        this.content.style.minHeight = this.content.style.minWidth = '';\n                        this.content.style.position = '';\n                        this.element.style.contain = '';\n                    }\n                });\n            }\n        },\n        getLast(last = 0, isCols) {\n            return this.items ? Math.min(isCols ? (this.columns || this.items[0])?.length || 0 : this.items?.length || 0, last) : 0;\n        },\n        getContentPosition() {\n            if (this.content) {\n                const style = getComputedStyle(this.content);\n                const left = parseFloat(style.paddingLeft) + Math.max(parseFloat(style.left) || 0, 0);\n                const right = parseFloat(style.paddingRight) + Math.max(parseFloat(style.right) || 0, 0);\n                const top = parseFloat(style.paddingTop) + Math.max(parseFloat(style.top) || 0, 0);\n                const bottom = parseFloat(style.paddingBottom) + Math.max(parseFloat(style.bottom) || 0, 0);\n\n                return { left, right, top, bottom, x: left + right, y: top + bottom };\n            }\n\n            return { left: 0, right: 0, top: 0, bottom: 0, x: 0, y: 0 };\n        },\n        setSize() {\n            if (this.element) {\n                const both = this.isBoth();\n                const horizontal = this.isHorizontal();\n                const parentElement = this.element.parentElement;\n                const width = this.scrollWidth || `${this.element.offsetWidth || parentElement.offsetWidth}px`;\n                const height = this.scrollHeight || `${this.element.offsetHeight || parentElement.offsetHeight}px`;\n                const setProp = (_name, _value) => (this.element.style[_name] = _value);\n\n                if (both || horizontal) {\n                    setProp('height', height);\n                    setProp('width', width);\n                } else {\n                    setProp('height', height);\n                }\n            }\n        },\n        setSpacerSize() {\n            const items = this.items;\n\n            if (items) {\n                const both = this.isBoth();\n                const horizontal = this.isHorizontal();\n                const contentPos = this.getContentPosition();\n                const setProp = (_name, _value, _size, _cpos = 0) => (this.spacerStyle = { ...this.spacerStyle, ...{ [`${_name}`]: (_value || []).length * _size + _cpos + 'px' } });\n\n                if (both) {\n                    setProp('height', items, this.itemSize[0], contentPos.y);\n                    setProp('width', this.columns || items[1], this.itemSize[1], contentPos.x);\n                } else {\n                    horizontal ? setProp('width', this.columns || items, this.itemSize, contentPos.x) : setProp('height', items, this.itemSize, contentPos.y);\n                }\n            }\n        },\n        setContentPosition(pos) {\n            if (this.content && !this.appendOnly) {\n                const both = this.isBoth();\n                const horizontal = this.isHorizontal();\n                const first = pos ? pos.first : this.first;\n                const calculateTranslateVal = (_first, _size) => _first * _size;\n                const setTransform = (_x = 0, _y = 0) => (this.contentStyle = { ...this.contentStyle, ...{ transform: `translate3d(${_x}px, ${_y}px, 0)` } });\n\n                if (both) {\n                    setTransform(calculateTranslateVal(first.cols, this.itemSize[1]), calculateTranslateVal(first.rows, this.itemSize[0]));\n                } else {\n                    const translateVal = calculateTranslateVal(first, this.itemSize);\n\n                    horizontal ? setTransform(translateVal, 0) : setTransform(0, translateVal);\n                }\n            }\n        },\n        onScrollPositionChange(event) {\n            const target = event.target;\n            const both = this.isBoth();\n            const horizontal = this.isHorizontal();\n            const contentPos = this.getContentPosition();\n            const calculateScrollPos = (_pos, _cpos) => (_pos ? (_pos > _cpos ? _pos - _cpos : _pos) : 0);\n            const calculateCurrentIndex = (_pos, _size) => Math.floor(_pos / (_size || _pos));\n\n            const calculateTriggerIndex = (_currentIndex, _first, _last, _num, _numT, _isScrollDownOrRight) => {\n                return _currentIndex <= _numT ? _numT : _isScrollDownOrRight ? _last - _num - _numT : _first + _numT - 1;\n            };\n\n            const calculateFirst = (_currentIndex, _triggerIndex, _first, _last, _num, _numT, _isScrollDownOrRight) => {\n                if (_currentIndex <= _numT) return 0;\n                else return Math.max(0, _isScrollDownOrRight ? (_currentIndex < _triggerIndex ? _first : _currentIndex - _numT) : _currentIndex > _triggerIndex ? _first : _currentIndex - 2 * _numT);\n            };\n\n            const calculateLast = (_currentIndex, _first, _last, _num, _numT, _isCols) => {\n                let lastValue = _first + _num + 2 * _numT;\n\n                if (_currentIndex >= _numT) {\n                    lastValue += _numT + 1;\n                }\n\n                return this.getLast(lastValue, _isCols);\n            };\n\n            const scrollTop = calculateScrollPos(target.scrollTop, contentPos.top);\n            const scrollLeft = calculateScrollPos(target.scrollLeft, contentPos.left);\n\n            let newFirst = both ? { rows: 0, cols: 0 } : 0;\n            let newLast = this.last;\n            let isRangeChanged = false;\n            let newScrollPos = this.lastScrollPos;\n\n            if (both) {\n                const isScrollDown = this.lastScrollPos.top <= scrollTop;\n                const isScrollRight = this.lastScrollPos.left <= scrollLeft;\n\n                if (!this.appendOnly || (this.appendOnly && (isScrollDown || isScrollRight))) {\n                    const currentIndex = { rows: calculateCurrentIndex(scrollTop, this.itemSize[0]), cols: calculateCurrentIndex(scrollLeft, this.itemSize[1]) };\n                    const triggerIndex = {\n                        rows: calculateTriggerIndex(currentIndex.rows, this.first.rows, this.last.rows, this.numItemsInViewport.rows, this.d_numToleratedItems[0], isScrollDown),\n                        cols: calculateTriggerIndex(currentIndex.cols, this.first.cols, this.last.cols, this.numItemsInViewport.cols, this.d_numToleratedItems[1], isScrollRight)\n                    };\n\n                    newFirst = {\n                        rows: calculateFirst(currentIndex.rows, triggerIndex.rows, this.first.rows, this.last.rows, this.numItemsInViewport.rows, this.d_numToleratedItems[0], isScrollDown),\n                        cols: calculateFirst(currentIndex.cols, triggerIndex.cols, this.first.cols, this.last.cols, this.numItemsInViewport.cols, this.d_numToleratedItems[1], isScrollRight)\n                    };\n                    newLast = {\n                        rows: calculateLast(currentIndex.rows, newFirst.rows, this.last.rows, this.numItemsInViewport.rows, this.d_numToleratedItems[0]),\n                        cols: calculateLast(currentIndex.cols, newFirst.cols, this.last.cols, this.numItemsInViewport.cols, this.d_numToleratedItems[1], true)\n                    };\n\n                    isRangeChanged = newFirst.rows !== this.first.rows || newLast.rows !== this.last.rows || newFirst.cols !== this.first.cols || newLast.cols !== this.last.cols || this.isRangeChanged;\n                    newScrollPos = { top: scrollTop, left: scrollLeft };\n                }\n            } else {\n                const scrollPos = horizontal ? scrollLeft : scrollTop;\n                const isScrollDownOrRight = this.lastScrollPos <= scrollPos;\n\n                if (!this.appendOnly || (this.appendOnly && isScrollDownOrRight)) {\n                    const currentIndex = calculateCurrentIndex(scrollPos, this.itemSize);\n                    const triggerIndex = calculateTriggerIndex(currentIndex, this.first, this.last, this.numItemsInViewport, this.d_numToleratedItems, isScrollDownOrRight);\n\n                    newFirst = calculateFirst(currentIndex, triggerIndex, this.first, this.last, this.numItemsInViewport, this.d_numToleratedItems, isScrollDownOrRight);\n                    newLast = calculateLast(currentIndex, newFirst, this.last, this.numItemsInViewport, this.d_numToleratedItems);\n                    isRangeChanged = newFirst !== this.first || newLast !== this.last || this.isRangeChanged;\n                    newScrollPos = scrollPos;\n                }\n            }\n\n            return {\n                first: newFirst,\n                last: newLast,\n                isRangeChanged,\n                scrollPos: newScrollPos\n            };\n        },\n        onScrollChange(event) {\n            const { first, last, isRangeChanged, scrollPos } = this.onScrollPositionChange(event);\n\n            if (isRangeChanged) {\n                const newState = { first, last };\n\n                this.setContentPosition(newState);\n\n                this.first = first;\n                this.last = last;\n                this.lastScrollPos = scrollPos;\n\n                this.$emit('scroll-index-change', newState);\n\n                if (this.lazy && this.isPageChanged(first)) {\n                    const lazyLoadState = {\n                        first: this.step ? Math.min(this.getPageByFirst(first) * this.step, (this.items?.length || 0) - this.step) : first,\n                        last: Math.min(this.step ? (this.getPageByFirst(first) + 1) * this.step : last, this.items?.length || 0)\n                    };\n                    const isLazyStateChanged = this.lazyLoadState.first !== lazyLoadState.first || this.lazyLoadState.last !== lazyLoadState.last;\n\n                    isLazyStateChanged && this.$emit('lazy-load', lazyLoadState);\n                    this.lazyLoadState = lazyLoadState;\n                }\n            }\n        },\n        onScroll(event) {\n            this.$emit('scroll', event);\n\n            if (this.delay) {\n                if (this.scrollTimeout) {\n                    clearTimeout(this.scrollTimeout);\n                }\n\n                if (this.isPageChanged()) {\n                    if (!this.d_loading && this.showLoader) {\n                        const { isRangeChanged } = this.onScrollPositionChange(event);\n                        const changed = isRangeChanged || (this.step ? this.isPageChanged() : false);\n\n                        changed && (this.d_loading = true);\n                    }\n\n                    this.scrollTimeout = setTimeout(() => {\n                        this.onScrollChange(event);\n\n                        if (this.d_loading && this.showLoader && (!this.lazy || this.loading === undefined)) {\n                            this.d_loading = false;\n                            this.page = this.getPageByFirst();\n                        }\n                    }, this.delay);\n                }\n            } else {\n                this.onScrollChange(event);\n            }\n        },\n        onResize() {\n            if (this.resizeTimeout) {\n                clearTimeout(this.resizeTimeout);\n            }\n\n            this.resizeTimeout = setTimeout(() => {\n                if (DomHandler.isVisible(this.element)) {\n                    const both = this.isBoth();\n                    const vertical = this.isVertical();\n                    const horizontal = this.isHorizontal();\n                    const [width, height] = [DomHandler.getWidth(this.element), DomHandler.getHeight(this.element)];\n                    const [isDiffWidth, isDiffHeight] = [width !== this.defaultWidth, height !== this.defaultHeight];\n                    const reinit = both ? isDiffWidth || isDiffHeight : horizontal ? isDiffWidth : vertical ? isDiffHeight : false;\n\n                    if (reinit) {\n                        this.d_numToleratedItems = this.numToleratedItems;\n                        this.defaultWidth = width;\n                        this.defaultHeight = height;\n                        this.defaultContentWidth = DomHandler.getWidth(this.content);\n                        this.defaultContentHeight = DomHandler.getHeight(this.content);\n\n                        this.init();\n                    }\n                }\n            }, this.resizeDelay);\n        },\n        bindResizeListener() {\n            if (!this.resizeListener) {\n                this.resizeListener = this.onResize.bind(this);\n\n                window.addEventListener('resize', this.resizeListener);\n                window.addEventListener('orientationchange', this.resizeListener);\n            }\n        },\n        unbindResizeListener() {\n            if (this.resizeListener) {\n                window.removeEventListener('resize', this.resizeListener);\n                window.removeEventListener('orientationchange', this.resizeListener);\n                this.resizeListener = null;\n            }\n        },\n        getOptions(renderedIndex) {\n            const count = (this.items || []).length;\n            const index = this.isBoth() ? this.first.rows + renderedIndex : this.first + renderedIndex;\n\n            return {\n                index,\n                count,\n                first: index === 0,\n                last: index === count - 1,\n                even: index % 2 === 0,\n                odd: index % 2 !== 0\n            };\n        },\n        getLoaderOptions(index, extOptions) {\n            let count = this.loaderArr.length;\n\n            return {\n                index,\n                count,\n                first: index === 0,\n                last: index === count - 1,\n                even: index % 2 === 0,\n                odd: index % 2 !== 0,\n                ...extOptions\n            };\n        },\n        getPageByFirst(first) {\n            return Math.floor(((first ?? this.first) + this.d_numToleratedItems * 4) / (this.step || 1));\n        },\n        isPageChanged(first) {\n            return this.step ? this.page !== this.getPageByFirst(first ?? this.first) : true;\n        },\n        setContentEl(el) {\n            this.content = el || this.content || DomHandler.findSingle(this.element, '[data-pc-section=\"content\"]');\n        },\n        elementRef(el) {\n            this.element = el;\n        },\n        contentRef(el) {\n            this.content = el;\n        }\n    },\n    computed: {\n        containerClass() {\n            return [\n                'p-virtualscroller',\n                this.class,\n                {\n                    'p-virtualscroller-inline': this.inline,\n                    'p-virtualscroller-both p-both-scroll': this.isBoth(),\n                    'p-virtualscroller-horizontal p-horizontal-scroll': this.isHorizontal()\n                }\n            ];\n        },\n        contentClass() {\n            return [\n                'p-virtualscroller-content',\n                {\n                    'p-virtualscroller-loading': this.d_loading\n                }\n            ];\n        },\n        loaderClass() {\n            return [\n                'p-virtualscroller-loader',\n                {\n                    'p-overlay-mask': !this.$slots.loader\n                }\n            ];\n        },\n        loadedItems() {\n            if (this.items && !this.d_loading) {\n                if (this.isBoth()) return this.items.slice(this.appendOnly ? 0 : this.first.rows, this.last.rows).map((item) => (this.columns ? item : item.slice(this.appendOnly ? 0 : this.first.cols, this.last.cols)));\n                else if (this.isHorizontal() && this.columns) return this.items;\n                else return this.items.slice(this.appendOnly ? 0 : this.first, this.last);\n            }\n\n            return [];\n        },\n        loadedRows() {\n            return this.d_loading ? (this.loaderDisabled ? this.loaderArr : []) : this.loadedItems;\n        },\n        loadedColumns() {\n            if (this.columns) {\n                const both = this.isBoth();\n                const horizontal = this.isHorizontal();\n\n                if (both || horizontal) {\n                    return this.d_loading && this.loaderDisabled ? (both ? this.loaderArr[0] : this.loaderArr) : this.columns.slice(both ? this.first.cols : this.first, both ? this.last.cols : this.last);\n                }\n            }\n\n            return this.columns;\n        }\n    },\n    components: {\n        SpinnerIcon: SpinnerIcon\n    }\n};\n</script>\n","<template>\n    <template v-if=\"!disabled\">\n        <div :ref=\"elementRef\" :class=\"containerClass\" :tabindex=\"tabindex\" :style=\"style\" @scroll=\"onScroll\" v-bind=\"ptmi('root')\">\n            <slot\n                name=\"content\"\n                :styleClass=\"contentClass\"\n                :items=\"loadedItems\"\n                :getItemOptions=\"getOptions\"\n                :loading=\"d_loading\"\n                :getLoaderOptions=\"getLoaderOptions\"\n                :itemSize=\"itemSize\"\n                :rows=\"loadedRows\"\n                :columns=\"loadedColumns\"\n                :contentRef=\"contentRef\"\n                :spacerStyle=\"spacerStyle\"\n                :contentStyle=\"contentStyle\"\n                :vertical=\"isVertical()\"\n                :horizontal=\"isHorizontal()\"\n                :both=\"isBoth()\"\n            >\n                <div :ref=\"contentRef\" :class=\"contentClass\" :style=\"contentStyle\" v-bind=\"ptm('content')\">\n                    <template v-for=\"(item, index) of loadedItems\" :key=\"index\">\n                        <slot name=\"item\" :item=\"item\" :options=\"getOptions(index)\"></slot>\n                    </template>\n                </div>\n            </slot>\n            <div v-if=\"showSpacer\" class=\"p-virtualscroller-spacer\" :style=\"spacerStyle\" v-bind=\"ptm('spacer')\"></div>\n            <div v-if=\"!loaderDisabled && showLoader && d_loading\" :class=\"loaderClass\" v-bind=\"ptm('loader')\">\n                <template v-if=\"$slots && $slots.loader\">\n                    <template v-for=\"(_, index) of loaderArr\" :key=\"index\">\n                        <slot name=\"loader\" :options=\"getLoaderOptions(index, isBoth() && { numCols: d_numItemsInViewport.cols })\"></slot>\n                    </template>\n                </template>\n                <slot name=\"loadingicon\">\n                    <SpinnerIcon spin class=\"p-virtualscroller-loading-icon\" v-bind=\"ptm('loadingIcon')\" />\n                </slot>\n            </div>\n        </div>\n    </template>\n    <template v-else>\n        <slot></slot>\n        <slot name=\"content\" :items=\"items\" :rows=\"items\" :columns=\"loadedColumns\"></slot>\n    </template>\n</template>\n\n<script>\nimport { DomHandler } from '@primevue/core/utils';\nimport SpinnerIcon from '@primevue/icons/spinner';\nimport BaseVirtualScroller from './BaseVirtualScroller.vue';\n\nexport default {\n    name: 'VirtualScroller',\n    extends: BaseVirtualScroller,\n    inheritAttrs: false,\n    emits: ['update:numToleratedItems', 'scroll', 'scroll-index-change', 'lazy-load'],\n    data() {\n        const both = this.isBoth();\n\n        return {\n            first: both ? { rows: 0, cols: 0 } : 0,\n            last: both ? { rows: 0, cols: 0 } : 0,\n            page: both ? { rows: 0, cols: 0 } : 0,\n            numItemsInViewport: both ? { rows: 0, cols: 0 } : 0,\n            lastScrollPos: both ? { top: 0, left: 0 } : 0,\n            d_numToleratedItems: this.numToleratedItems,\n            d_loading: this.loading,\n            loaderArr: [],\n            spacerStyle: {},\n            contentStyle: {}\n        };\n    },\n    element: null,\n    content: null,\n    lastScrollPos: null,\n    scrollTimeout: null,\n    resizeTimeout: null,\n    defaultWidth: 0,\n    defaultHeight: 0,\n    defaultContentWidth: 0,\n    defaultContentHeight: 0,\n    isRangeChanged: false,\n    lazyLoadState: {},\n    resizeListener: null,\n    initialized: false,\n    watch: {\n        numToleratedItems(newValue) {\n            this.d_numToleratedItems = newValue;\n        },\n        loading(newValue, oldValue) {\n            if (this.lazy && newValue !== oldValue && newValue !== this.d_loading) {\n                this.d_loading = newValue;\n            }\n        },\n        items(newValue, oldValue) {\n            if (!oldValue || oldValue.length !== (newValue || []).length) {\n                this.init();\n                this.calculateAutoSize();\n            }\n        },\n        itemSize() {\n            this.init();\n            this.calculateAutoSize();\n        },\n        orientation() {\n            this.lastScrollPos = this.isBoth() ? { top: 0, left: 0 } : 0;\n        },\n        scrollHeight() {\n            this.init();\n            this.calculateAutoSize();\n        },\n        scrollWidth() {\n            this.init();\n            this.calculateAutoSize();\n        }\n    },\n    mounted() {\n        this.viewInit();\n\n        this.lastScrollPos = this.isBoth() ? { top: 0, left: 0 } : 0;\n        this.lazyLoadState = this.lazyLoadState || {};\n    },\n    updated() {\n        !this.initialized && this.viewInit();\n    },\n    unmounted() {\n        this.unbindResizeListener();\n\n        this.initialized = false;\n    },\n    methods: {\n        viewInit() {\n            if (DomHandler.isVisible(this.element)) {\n                this.setContentEl(this.content);\n                this.init();\n                this.calculateAutoSize();\n                this.bindResizeListener();\n\n                this.defaultWidth = DomHandler.getWidth(this.element);\n                this.defaultHeight = DomHandler.getHeight(this.element);\n                this.defaultContentWidth = DomHandler.getWidth(this.content);\n                this.defaultContentHeight = DomHandler.getHeight(this.content);\n                this.initialized = true;\n            }\n        },\n        init() {\n            if (!this.disabled) {\n                this.setSize();\n                this.calculateOptions();\n                this.setSpacerSize();\n            }\n        },\n        isVertical() {\n            return this.orientation === 'vertical';\n        },\n        isHorizontal() {\n            return this.orientation === 'horizontal';\n        },\n        isBoth() {\n            return this.orientation === 'both';\n        },\n        scrollTo(options) {\n            //this.lastScrollPos = this.both ? { top: 0, left: 0 } : 0;\n            this.element && this.element.scrollTo(options);\n        },\n        scrollToIndex(index, behavior = 'auto') {\n            const both = this.isBoth();\n            const horizontal = this.isHorizontal();\n            const valid = both ? index.every((i) => i > -1) : index > -1;\n\n            if (valid) {\n                const first = this.first;\n                const { scrollTop = 0, scrollLeft = 0 } = this.element;\n                const { numToleratedItems } = this.calculateNumItems();\n                const contentPos = this.getContentPosition();\n                const itemSize = this.itemSize;\n                const calculateFirst = (_index = 0, _numT) => (_index <= _numT ? 0 : _index);\n                const calculateCoord = (_first, _size, _cpos) => _first * _size + _cpos;\n                const scrollTo = (left = 0, top = 0) => this.scrollTo({ left, top, behavior });\n                let newFirst = both ? { rows: 0, cols: 0 } : 0;\n                let isRangeChanged = false,\n                    isScrollChanged = false;\n\n                if (both) {\n                    newFirst = { rows: calculateFirst(index[0], numToleratedItems[0]), cols: calculateFirst(index[1], numToleratedItems[1]) };\n                    scrollTo(calculateCoord(newFirst.cols, itemSize[1], contentPos.left), calculateCoord(newFirst.rows, itemSize[0], contentPos.top));\n                    isScrollChanged = this.lastScrollPos.top !== scrollTop || this.lastScrollPos.left !== scrollLeft;\n                    isRangeChanged = newFirst.rows !== first.rows || newFirst.cols !== first.cols;\n                } else {\n                    newFirst = calculateFirst(index, numToleratedItems);\n                    horizontal ? scrollTo(calculateCoord(newFirst, itemSize, contentPos.left), scrollTop) : scrollTo(scrollLeft, calculateCoord(newFirst, itemSize, contentPos.top));\n                    isScrollChanged = this.lastScrollPos !== (horizontal ? scrollLeft : scrollTop);\n                    isRangeChanged = newFirst !== first;\n                }\n\n                this.isRangeChanged = isRangeChanged;\n                isScrollChanged && (this.first = newFirst);\n            }\n        },\n        scrollInView(index, to, behavior = 'auto') {\n            if (to) {\n                const both = this.isBoth();\n                const horizontal = this.isHorizontal();\n                const valid = both ? index.every((i) => i > -1) : index > -1;\n\n                if (valid) {\n                    const { first, viewport } = this.getRenderedRange();\n                    const scrollTo = (left = 0, top = 0) => this.scrollTo({ left, top, behavior });\n                    const isToStart = to === 'to-start';\n                    const isToEnd = to === 'to-end';\n\n                    if (isToStart) {\n                        if (both) {\n                            if (viewport.first.rows - first.rows > index[0]) {\n                                scrollTo(viewport.first.cols * this.itemSize[1], (viewport.first.rows - 1) * this.itemSize[0]);\n                            } else if (viewport.first.cols - first.cols > index[1]) {\n                                scrollTo((viewport.first.cols - 1) * this.itemSize[1], viewport.first.rows * this.itemSize[0]);\n                            }\n                        } else {\n                            if (viewport.first - first > index) {\n                                const pos = (viewport.first - 1) * this.itemSize;\n\n                                horizontal ? scrollTo(pos, 0) : scrollTo(0, pos);\n                            }\n                        }\n                    } else if (isToEnd) {\n                        if (both) {\n                            if (viewport.last.rows - first.rows <= index[0] + 1) {\n                                scrollTo(viewport.first.cols * this.itemSize[1], (viewport.first.rows + 1) * this.itemSize[0]);\n                            } else if (viewport.last.cols - first.cols <= index[1] + 1) {\n                                scrollTo((viewport.first.cols + 1) * this.itemSize[1], viewport.first.rows * this.itemSize[0]);\n                            }\n                        } else {\n                            if (viewport.last - first <= index + 1) {\n                                const pos = (viewport.first + 1) * this.itemSize;\n\n                                horizontal ? scrollTo(pos, 0) : scrollTo(0, pos);\n                            }\n                        }\n                    }\n                }\n            } else {\n                this.scrollToIndex(index, behavior);\n            }\n        },\n        getRenderedRange() {\n            const calculateFirstInViewport = (_pos, _size) => Math.floor(_pos / (_size || _pos));\n\n            let firstInViewport = this.first;\n            let lastInViewport = 0;\n\n            if (this.element) {\n                const both = this.isBoth();\n                const horizontal = this.isHorizontal();\n                const { scrollTop, scrollLeft } = this.element;\n\n                if (both) {\n                    firstInViewport = { rows: calculateFirstInViewport(scrollTop, this.itemSize[0]), cols: calculateFirstInViewport(scrollLeft, this.itemSize[1]) };\n                    lastInViewport = { rows: firstInViewport.rows + this.numItemsInViewport.rows, cols: firstInViewport.cols + this.numItemsInViewport.cols };\n                } else {\n                    const scrollPos = horizontal ? scrollLeft : scrollTop;\n\n                    firstInViewport = calculateFirstInViewport(scrollPos, this.itemSize);\n                    lastInViewport = firstInViewport + this.numItemsInViewport;\n                }\n            }\n\n            return {\n                first: this.first,\n                last: this.last,\n                viewport: {\n                    first: firstInViewport,\n                    last: lastInViewport\n                }\n            };\n        },\n        calculateNumItems() {\n            const both = this.isBoth();\n            const horizontal = this.isHorizontal();\n            const itemSize = this.itemSize;\n            const contentPos = this.getContentPosition();\n            const contentWidth = this.element ? this.element.offsetWidth - contentPos.left : 0;\n            const contentHeight = this.element ? this.element.offsetHeight - contentPos.top : 0;\n            const calculateNumItemsInViewport = (_contentSize, _itemSize) => Math.ceil(_contentSize / (_itemSize || _contentSize));\n            const calculateNumToleratedItems = (_numItems) => Math.ceil(_numItems / 2);\n            const numItemsInViewport = both\n                ? { rows: calculateNumItemsInViewport(contentHeight, itemSize[0]), cols: calculateNumItemsInViewport(contentWidth, itemSize[1]) }\n                : calculateNumItemsInViewport(horizontal ? contentWidth : contentHeight, itemSize);\n\n            const numToleratedItems = this.d_numToleratedItems || (both ? [calculateNumToleratedItems(numItemsInViewport.rows), calculateNumToleratedItems(numItemsInViewport.cols)] : calculateNumToleratedItems(numItemsInViewport));\n\n            return { numItemsInViewport, numToleratedItems };\n        },\n        calculateOptions() {\n            const both = this.isBoth();\n            const first = this.first;\n            const { numItemsInViewport, numToleratedItems } = this.calculateNumItems();\n            const calculateLast = (_first, _num, _numT, _isCols = false) => this.getLast(_first + _num + (_first < _numT ? 2 : 3) * _numT, _isCols);\n            const last = both\n                ? { rows: calculateLast(first.rows, numItemsInViewport.rows, numToleratedItems[0]), cols: calculateLast(first.cols, numItemsInViewport.cols, numToleratedItems[1], true) }\n                : calculateLast(first, numItemsInViewport, numToleratedItems);\n\n            this.last = last;\n            this.numItemsInViewport = numItemsInViewport;\n            this.d_numToleratedItems = numToleratedItems;\n            this.$emit('update:numToleratedItems', this.d_numToleratedItems);\n\n            if (this.showLoader) {\n                this.loaderArr = both ? Array.from({ length: numItemsInViewport.rows }).map(() => Array.from({ length: numItemsInViewport.cols })) : Array.from({ length: numItemsInViewport });\n            }\n\n            if (this.lazy) {\n                Promise.resolve().then(() => {\n                    this.lazyLoadState = {\n                        first: this.step ? (both ? { rows: 0, cols: first.cols } : 0) : first,\n                        last: Math.min(this.step ? this.step : last, this.items?.length || 0)\n                    };\n\n                    this.$emit('lazy-load', this.lazyLoadState);\n                });\n            }\n        },\n        calculateAutoSize() {\n            if (this.autoSize && !this.d_loading) {\n                Promise.resolve().then(() => {\n                    if (this.content) {\n                        const both = this.isBoth();\n                        const horizontal = this.isHorizontal();\n                        const vertical = this.isVertical();\n\n                        this.content.style.minHeight = this.content.style.minWidth = 'auto';\n                        this.content.style.position = 'relative';\n                        this.element.style.contain = 'none';\n\n                        /*const [contentWidth, contentHeight] = [DomHandler.getWidth(this.content), DomHandler.getHeight(this.content)];\n\n                        contentWidth !== this.defaultContentWidth && (this.element.style.width = '');\n                        contentHeight !== this.defaultContentHeight && (this.element.style.height = '');*/\n\n                        const [width, height] = [DomHandler.getWidth(this.element), DomHandler.getHeight(this.element)];\n\n                        (both || horizontal) && (this.element.style.width = width < this.defaultWidth ? width + 'px' : this.scrollWidth || this.defaultWidth + 'px');\n                        (both || vertical) && (this.element.style.height = height < this.defaultHeight ? height + 'px' : this.scrollHeight || this.defaultHeight + 'px');\n\n                        this.content.style.minHeight = this.content.style.minWidth = '';\n                        this.content.style.position = '';\n                        this.element.style.contain = '';\n                    }\n                });\n            }\n        },\n        getLast(last = 0, isCols) {\n            return this.items ? Math.min(isCols ? (this.columns || this.items[0])?.length || 0 : this.items?.length || 0, last) : 0;\n        },\n        getContentPosition() {\n            if (this.content) {\n                const style = getComputedStyle(this.content);\n                const left = parseFloat(style.paddingLeft) + Math.max(parseFloat(style.left) || 0, 0);\n                const right = parseFloat(style.paddingRight) + Math.max(parseFloat(style.right) || 0, 0);\n                const top = parseFloat(style.paddingTop) + Math.max(parseFloat(style.top) || 0, 0);\n                const bottom = parseFloat(style.paddingBottom) + Math.max(parseFloat(style.bottom) || 0, 0);\n\n                return { left, right, top, bottom, x: left + right, y: top + bottom };\n            }\n\n            return { left: 0, right: 0, top: 0, bottom: 0, x: 0, y: 0 };\n        },\n        setSize() {\n            if (this.element) {\n                const both = this.isBoth();\n                const horizontal = this.isHorizontal();\n                const parentElement = this.element.parentElement;\n                const width = this.scrollWidth || `${this.element.offsetWidth || parentElement.offsetWidth}px`;\n                const height = this.scrollHeight || `${this.element.offsetHeight || parentElement.offsetHeight}px`;\n                const setProp = (_name, _value) => (this.element.style[_name] = _value);\n\n                if (both || horizontal) {\n                    setProp('height', height);\n                    setProp('width', width);\n                } else {\n                    setProp('height', height);\n                }\n            }\n        },\n        setSpacerSize() {\n            const items = this.items;\n\n            if (items) {\n                const both = this.isBoth();\n                const horizontal = this.isHorizontal();\n                const contentPos = this.getContentPosition();\n                const setProp = (_name, _value, _size, _cpos = 0) => (this.spacerStyle = { ...this.spacerStyle, ...{ [`${_name}`]: (_value || []).length * _size + _cpos + 'px' } });\n\n                if (both) {\n                    setProp('height', items, this.itemSize[0], contentPos.y);\n                    setProp('width', this.columns || items[1], this.itemSize[1], contentPos.x);\n                } else {\n                    horizontal ? setProp('width', this.columns || items, this.itemSize, contentPos.x) : setProp('height', items, this.itemSize, contentPos.y);\n                }\n            }\n        },\n        setContentPosition(pos) {\n            if (this.content && !this.appendOnly) {\n                const both = this.isBoth();\n                const horizontal = this.isHorizontal();\n                const first = pos ? pos.first : this.first;\n                const calculateTranslateVal = (_first, _size) => _first * _size;\n                const setTransform = (_x = 0, _y = 0) => (this.contentStyle = { ...this.contentStyle, ...{ transform: `translate3d(${_x}px, ${_y}px, 0)` } });\n\n                if (both) {\n                    setTransform(calculateTranslateVal(first.cols, this.itemSize[1]), calculateTranslateVal(first.rows, this.itemSize[0]));\n                } else {\n                    const translateVal = calculateTranslateVal(first, this.itemSize);\n\n                    horizontal ? setTransform(translateVal, 0) : setTransform(0, translateVal);\n                }\n            }\n        },\n        onScrollPositionChange(event) {\n            const target = event.target;\n            const both = this.isBoth();\n            const horizontal = this.isHorizontal();\n            const contentPos = this.getContentPosition();\n            const calculateScrollPos = (_pos, _cpos) => (_pos ? (_pos > _cpos ? _pos - _cpos : _pos) : 0);\n            const calculateCurrentIndex = (_pos, _size) => Math.floor(_pos / (_size || _pos));\n\n            const calculateTriggerIndex = (_currentIndex, _first, _last, _num, _numT, _isScrollDownOrRight) => {\n                return _currentIndex <= _numT ? _numT : _isScrollDownOrRight ? _last - _num - _numT : _first + _numT - 1;\n            };\n\n            const calculateFirst = (_currentIndex, _triggerIndex, _first, _last, _num, _numT, _isScrollDownOrRight) => {\n                if (_currentIndex <= _numT) return 0;\n                else return Math.max(0, _isScrollDownOrRight ? (_currentIndex < _triggerIndex ? _first : _currentIndex - _numT) : _currentIndex > _triggerIndex ? _first : _currentIndex - 2 * _numT);\n            };\n\n            const calculateLast = (_currentIndex, _first, _last, _num, _numT, _isCols) => {\n                let lastValue = _first + _num + 2 * _numT;\n\n                if (_currentIndex >= _numT) {\n                    lastValue += _numT + 1;\n                }\n\n                return this.getLast(lastValue, _isCols);\n            };\n\n            const scrollTop = calculateScrollPos(target.scrollTop, contentPos.top);\n            const scrollLeft = calculateScrollPos(target.scrollLeft, contentPos.left);\n\n            let newFirst = both ? { rows: 0, cols: 0 } : 0;\n            let newLast = this.last;\n            let isRangeChanged = false;\n            let newScrollPos = this.lastScrollPos;\n\n            if (both) {\n                const isScrollDown = this.lastScrollPos.top <= scrollTop;\n                const isScrollRight = this.lastScrollPos.left <= scrollLeft;\n\n                if (!this.appendOnly || (this.appendOnly && (isScrollDown || isScrollRight))) {\n                    const currentIndex = { rows: calculateCurrentIndex(scrollTop, this.itemSize[0]), cols: calculateCurrentIndex(scrollLeft, this.itemSize[1]) };\n                    const triggerIndex = {\n                        rows: calculateTriggerIndex(currentIndex.rows, this.first.rows, this.last.rows, this.numItemsInViewport.rows, this.d_numToleratedItems[0], isScrollDown),\n                        cols: calculateTriggerIndex(currentIndex.cols, this.first.cols, this.last.cols, this.numItemsInViewport.cols, this.d_numToleratedItems[1], isScrollRight)\n                    };\n\n                    newFirst = {\n                        rows: calculateFirst(currentIndex.rows, triggerIndex.rows, this.first.rows, this.last.rows, this.numItemsInViewport.rows, this.d_numToleratedItems[0], isScrollDown),\n                        cols: calculateFirst(currentIndex.cols, triggerIndex.cols, this.first.cols, this.last.cols, this.numItemsInViewport.cols, this.d_numToleratedItems[1], isScrollRight)\n                    };\n                    newLast = {\n                        rows: calculateLast(currentIndex.rows, newFirst.rows, this.last.rows, this.numItemsInViewport.rows, this.d_numToleratedItems[0]),\n                        cols: calculateLast(currentIndex.cols, newFirst.cols, this.last.cols, this.numItemsInViewport.cols, this.d_numToleratedItems[1], true)\n                    };\n\n                    isRangeChanged = newFirst.rows !== this.first.rows || newLast.rows !== this.last.rows || newFirst.cols !== this.first.cols || newLast.cols !== this.last.cols || this.isRangeChanged;\n                    newScrollPos = { top: scrollTop, left: scrollLeft };\n                }\n            } else {\n                const scrollPos = horizontal ? scrollLeft : scrollTop;\n                const isScrollDownOrRight = this.lastScrollPos <= scrollPos;\n\n                if (!this.appendOnly || (this.appendOnly && isScrollDownOrRight)) {\n                    const currentIndex = calculateCurrentIndex(scrollPos, this.itemSize);\n                    const triggerIndex = calculateTriggerIndex(currentIndex, this.first, this.last, this.numItemsInViewport, this.d_numToleratedItems, isScrollDownOrRight);\n\n                    newFirst = calculateFirst(currentIndex, triggerIndex, this.first, this.last, this.numItemsInViewport, this.d_numToleratedItems, isScrollDownOrRight);\n                    newLast = calculateLast(currentIndex, newFirst, this.last, this.numItemsInViewport, this.d_numToleratedItems);\n                    isRangeChanged = newFirst !== this.first || newLast !== this.last || this.isRangeChanged;\n                    newScrollPos = scrollPos;\n                }\n            }\n\n            return {\n                first: newFirst,\n                last: newLast,\n                isRangeChanged,\n                scrollPos: newScrollPos\n            };\n        },\n        onScrollChange(event) {\n            const { first, last, isRangeChanged, scrollPos } = this.onScrollPositionChange(event);\n\n            if (isRangeChanged) {\n                const newState = { first, last };\n\n                this.setContentPosition(newState);\n\n                this.first = first;\n                this.last = last;\n                this.lastScrollPos = scrollPos;\n\n                this.$emit('scroll-index-change', newState);\n\n                if (this.lazy && this.isPageChanged(first)) {\n                    const lazyLoadState = {\n                        first: this.step ? Math.min(this.getPageByFirst(first) * this.step, (this.items?.length || 0) - this.step) : first,\n                        last: Math.min(this.step ? (this.getPageByFirst(first) + 1) * this.step : last, this.items?.length || 0)\n                    };\n                    const isLazyStateChanged = this.lazyLoadState.first !== lazyLoadState.first || this.lazyLoadState.last !== lazyLoadState.last;\n\n                    isLazyStateChanged && this.$emit('lazy-load', lazyLoadState);\n                    this.lazyLoadState = lazyLoadState;\n                }\n            }\n        },\n        onScroll(event) {\n            this.$emit('scroll', event);\n\n            if (this.delay) {\n                if (this.scrollTimeout) {\n                    clearTimeout(this.scrollTimeout);\n                }\n\n                if (this.isPageChanged()) {\n                    if (!this.d_loading && this.showLoader) {\n                        const { isRangeChanged } = this.onScrollPositionChange(event);\n                        const changed = isRangeChanged || (this.step ? this.isPageChanged() : false);\n\n                        changed && (this.d_loading = true);\n                    }\n\n                    this.scrollTimeout = setTimeout(() => {\n                        this.onScrollChange(event);\n\n                        if (this.d_loading && this.showLoader && (!this.lazy || this.loading === undefined)) {\n                            this.d_loading = false;\n                            this.page = this.getPageByFirst();\n                        }\n                    }, this.delay);\n                }\n            } else {\n                this.onScrollChange(event);\n            }\n        },\n        onResize() {\n            if (this.resizeTimeout) {\n                clearTimeout(this.resizeTimeout);\n            }\n\n            this.resizeTimeout = setTimeout(() => {\n                if (DomHandler.isVisible(this.element)) {\n                    const both = this.isBoth();\n                    const vertical = this.isVertical();\n                    const horizontal = this.isHorizontal();\n                    const [width, height] = [DomHandler.getWidth(this.element), DomHandler.getHeight(this.element)];\n                    const [isDiffWidth, isDiffHeight] = [width !== this.defaultWidth, height !== this.defaultHeight];\n                    const reinit = both ? isDiffWidth || isDiffHeight : horizontal ? isDiffWidth : vertical ? isDiffHeight : false;\n\n                    if (reinit) {\n                        this.d_numToleratedItems = this.numToleratedItems;\n                        this.defaultWidth = width;\n                        this.defaultHeight = height;\n                        this.defaultContentWidth = DomHandler.getWidth(this.content);\n                        this.defaultContentHeight = DomHandler.getHeight(this.content);\n\n                        this.init();\n                    }\n                }\n            }, this.resizeDelay);\n        },\n        bindResizeListener() {\n            if (!this.resizeListener) {\n                this.resizeListener = this.onResize.bind(this);\n\n                window.addEventListener('resize', this.resizeListener);\n                window.addEventListener('orientationchange', this.resizeListener);\n            }\n        },\n        unbindResizeListener() {\n            if (this.resizeListener) {\n                window.removeEventListener('resize', this.resizeListener);\n                window.removeEventListener('orientationchange', this.resizeListener);\n                this.resizeListener = null;\n            }\n        },\n        getOptions(renderedIndex) {\n            const count = (this.items || []).length;\n            const index = this.isBoth() ? this.first.rows + renderedIndex : this.first + renderedIndex;\n\n            return {\n                index,\n                count,\n                first: index === 0,\n                last: index === count - 1,\n                even: index % 2 === 0,\n                odd: index % 2 !== 0\n            };\n        },\n        getLoaderOptions(index, extOptions) {\n            let count = this.loaderArr.length;\n\n            return {\n                index,\n                count,\n                first: index === 0,\n                last: index === count - 1,\n                even: index % 2 === 0,\n                odd: index % 2 !== 0,\n                ...extOptions\n            };\n        },\n        getPageByFirst(first) {\n            return Math.floor(((first ?? this.first) + this.d_numToleratedItems * 4) / (this.step || 1));\n        },\n        isPageChanged(first) {\n            return this.step ? this.page !== this.getPageByFirst(first ?? this.first) : true;\n        },\n        setContentEl(el) {\n            this.content = el || this.content || DomHandler.findSingle(this.element, '[data-pc-section=\"content\"]');\n        },\n        elementRef(el) {\n            this.element = el;\n        },\n        contentRef(el) {\n            this.content = el;\n        }\n    },\n    computed: {\n        containerClass() {\n            return [\n                'p-virtualscroller',\n                this.class,\n                {\n                    'p-virtualscroller-inline': this.inline,\n                    'p-virtualscroller-both p-both-scroll': this.isBoth(),\n                    'p-virtualscroller-horizontal p-horizontal-scroll': this.isHorizontal()\n                }\n            ];\n        },\n        contentClass() {\n            return [\n                'p-virtualscroller-content',\n                {\n                    'p-virtualscroller-loading': this.d_loading\n                }\n            ];\n        },\n        loaderClass() {\n            return [\n                'p-virtualscroller-loader',\n                {\n                    'p-overlay-mask': !this.$slots.loader\n                }\n            ];\n        },\n        loadedItems() {\n            if (this.items && !this.d_loading) {\n                if (this.isBoth()) return this.items.slice(this.appendOnly ? 0 : this.first.rows, this.last.rows).map((item) => (this.columns ? item : item.slice(this.appendOnly ? 0 : this.first.cols, this.last.cols)));\n                else if (this.isHorizontal() && this.columns) return this.items;\n                else return this.items.slice(this.appendOnly ? 0 : this.first, this.last);\n            }\n\n            return [];\n        },\n        loadedRows() {\n            return this.d_loading ? (this.loaderDisabled ? this.loaderArr : []) : this.loadedItems;\n        },\n        loadedColumns() {\n            if (this.columns) {\n                const both = this.isBoth();\n                const horizontal = this.isHorizontal();\n\n                if (both || horizontal) {\n                    return this.d_loading && this.loaderDisabled ? (both ? this.loaderArr[0] : this.loaderArr) : this.columns.slice(both ? this.first.cols : this.first, both ? this.last.cols : this.last);\n                }\n            }\n\n            return this.columns;\n        }\n    },\n    components: {\n        SpinnerIcon: SpinnerIcon\n    }\n};\n</script>\n"],"names":["name","BaseComponent","props","id","type","String","style","items","Array","itemSize","Number","scrollHeight","scrollWidth","orientation","numToleratedItems","delay","resizeDelay","lazy","Boolean","disabled","loaderDisabled","columns","loading","showSpacer","showLoader","tabindex","inline","step","appendOnly","autoSize","VirtualScrollerStyle","provide","$pcVirtualScroller","$parentInstance","beforeMount","_this$$primevueConfig","loadCSS","nonce","$primevueConfig","csp","BaseVirtualScroller","inheritAttrs","emits","data","both","isBoth","first","rows","cols","last","page","numItemsInViewport","lastScrollPos","top","left","d_numToleratedItems","d_loading","loaderArr","spacerStyle","contentStyle","element","content","scrollTimeout","resizeTimeout","defaultWidth","defaultHeight","defaultContentWidth","defaultContentHeight","isRangeChanged","lazyLoadState","resizeListener","initialized","watch","newValue","oldValue","length","init","calculateAutoSize","mounted","viewInit","updated","unmounted","unbindResizeListener","methods","DomHandler","isVisible","setContentEl","bindResizeListener","getWidth","getHeight","setSize","calculateOptions","setSpacerSize","isVertical","isHorizontal","scrollTo","options","scrollToIndex","index","_this","behavior","arguments","undefined","horizontal","valid","every","i","_this$element","_this$element$scrollT","scrollTop","_this$element$scrollL","scrollLeft","_this$calculateNumIte","calculateNumItems","contentPos","getContentPosition","calculateFirst","_index","_numT","calculateCoord","_first","_size","_cpos","newFirst","isScrollChanged","scrollInView","to","_this2","_this$getRenderedRang","getRenderedRange","viewport","isToStart","isToEnd","pos","calculateFirstInViewport","_pos","Math","floor","firstInViewport","lastInViewport","_this$element2","scrollPos","contentWidth","offsetWidth","contentHeight","offsetHeight","calculateNumItemsInViewport","_contentSize","_itemSize","ceil","calculateNumToleratedItems","_numItems","_this3","_this$calculateNumIte2","calculateLast","_num","_isCols","getLast","$emit","from","map","Promise","resolve","then","_this3$items","min","_this4","vertical","minHeight","minWidth","position","contain","_ref","width","height","_ref2","_this$items","isCols","getComputedStyle","parseFloat","paddingLeft","max","right","paddingRight","paddingTop","bottom","paddingBottom","x","y","_this5","parentElement","concat","setProp","_name","_value","_this6","_objectSpread","_defineProperty","setContentPosition","_this7","calculateTranslateVal","setTransform","_x","_y","transform","translateVal","onScrollPositionChange","event","_this8","target","calculateScrollPos","calculateCurrentIndex","calculateTriggerIndex","_currentIndex","_last","_isScrollDownOrRight","_triggerIndex","lastValue","newLast","newScrollPos","isScrollDown","isScrollRight","currentIndex","triggerIndex","isScrollDownOrRight","onScrollChange","_this$onScrollPositio","newState","isPageChanged","_this$items2","_this$items3","getPageByFirst","isLazyStateChanged","onScroll","_this9","clearTimeout","_this$onScrollPositio2","changed","setTimeout","onResize","_this10","_ref3","isDiffWidth","isDiffHeight","reinit","bind","window","addEventListener","removeEventListener","getOptions","renderedIndex","count","even","odd","getLoaderOptions","extOptions","el","findSingle","elementRef","contentRef","computed","containerClass","contentClass","loaderClass","$slots","loader","loadedItems","_this11","slice","item","loadedRows","loadedColumns","components","SpinnerIcon","_ctx","_openBlock","_createElementBlock","_mergeProps","ref","$options","apply","ptmi","_renderSlot","styleClass","getItemOptions","$data","_createElementVNode","ptm","_Fragment","_renderList","key","_","numCols","d_numItemsInViewport","_createVNode","_component_SpinnerIcon","spin"],"mappings":"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"}