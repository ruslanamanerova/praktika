{"version":3,"file":"index.mjs","sources":["../../src/animateonscroll/BaseAnimateOnScroll.js","../../src/animateonscroll/AnimateOnScroll.js"],"sourcesContent":["import BaseDirective from '@primevue/core/basedirective';\nimport AnimateOnScrollStyle from 'primevue/animateonscroll/style';\n\nconst BaseAnimateOnScroll = BaseDirective.extend({\n    style: AnimateOnScrollStyle\n});\n\nexport default BaseAnimateOnScroll;\n","import { DomHandler } from '@primevue/core/utils';\nimport BaseAnimateOnScroll from './BaseAnimateOnScroll';\n\nconst AnimateOnScroll = BaseAnimateOnScroll.extend('animateonscroll', {\n    created() {\n        this.$value = this.$value || {};\n        this.$el.style.opacity = this.$value.enterClass ? '0' : '';\n    },\n    mounted() {\n        this.$el.setAttribute('data-pd-animateonscroll', true);\n\n        this.bindIntersectionObserver();\n    },\n    unmounted() {\n        this.unbindAnimationEvents();\n        this.unbindIntersectionObserver();\n    },\n    observer: undefined,\n    resetObserver: undefined,\n    isObserverActive: false,\n    animationState: undefined,\n    animationEndListener: undefined,\n    methods: {\n        bindAnimationEvents() {\n            if (!this.animationEndListener) {\n                this.animationEndListener = () => {\n                    DomHandler.removeMultipleClasses(this.$el, [this.$value.enterClass, this.$value.leaveClass]);\n                    !this.$modifiers.once && this.resetObserver.observe(this.$el);\n                    this.unbindAnimationEvents();\n                };\n\n                this.$el.addEventListener('animationend', this.animationEndListener);\n            }\n        },\n        bindIntersectionObserver() {\n            const { root, rootMargin, threshold = 0.5 } = this.$value;\n            const options = { root, rootMargin, threshold };\n\n            // States\n            this.observer = new IntersectionObserver(([entry]) => {\n                if (this.isObserverActive) {\n                    if (entry.boundingClientRect.top > 0) {\n                        entry.isIntersecting ? this.enter() : this.leave();\n                    }\n                } else if (entry.isIntersecting) {\n                    this.enter();\n                }\n\n                this.isObserverActive = true;\n            }, options);\n\n            setTimeout(() => this.observer.observe(this.$el), 0);\n\n            // Reset\n            this.resetObserver = new IntersectionObserver(\n                ([entry]) => {\n                    if (entry.boundingClientRect.top > 0 && !entry.isIntersecting) {\n                        this.$el.style.opacity = this.$value.enterClass ? '0' : '';\n                        DomHandler.removeMultipleClasses(this.$el, [this.$value.enterClass, this.$value.leaveClass]);\n\n                        this.resetObserver.unobserve(this.$el);\n                    }\n\n                    this.animationState = undefined;\n                },\n                { ...options, threshold: 0 }\n            );\n        },\n        enter() {\n            if (this.animationState !== 'enter' && this.$value.enterClass) {\n                this.$el.style.opacity = '';\n                DomHandler.removeMultipleClasses(this.$el, this.$value.leaveClass);\n                DomHandler.addMultipleClasses(this.$el, this.$value.enterClass);\n\n                this.$modifiers.once && this.unbindIntersectionObserver(this.$el);\n\n                this.bindAnimationEvents();\n                this.animationState = 'enter';\n            }\n        },\n        leave() {\n            if (this.animationState !== 'leave' && this.$value.leaveClass) {\n                this.$el.style.opacity = this.$value.enterClass ? '0' : '';\n                DomHandler.removeMultipleClasses(this.$el, this.$value.enterClass);\n                DomHandler.addMultipleClasses(this.$el, this.$value.leaveClass);\n\n                this.bindAnimationEvents();\n                this.animationState = 'leave';\n            }\n        },\n        unbindAnimationEvents() {\n            if (this.animationEndListener) {\n                this.$el.removeEventListener('animationend', this.animationEndListener);\n                this.animationEndListener = undefined;\n            }\n        },\n        unbindIntersectionObserver() {\n            this.observer?.unobserve(this.$el);\n            this.resetObserver?.unobserve(this.$el);\n            this.isObserverActive = false;\n        }\n    }\n});\n\nexport default AnimateOnScroll;\n"],"names":["BaseAnimateOnScroll","BaseDirective","extend","style","AnimateOnScrollStyle","AnimateOnScroll","created","$value","$el","opacity","enterClass","mounted","setAttribute","bindIntersectionObserver","unmounted","unbindAnimationEvents","unbindIntersectionObserver","observer","undefined","resetObserver","isObserverActive","animationState","animationEndListener","methods","bindAnimationEvents","_this","DomHandler","removeMultipleClasses","leaveClass","$modifiers","once","observe","addEventListener","_this2","_this$$value","root","rootMargin","_this$$value$threshol","threshold","options","IntersectionObserver","_ref","_ref2","_slicedToArray","entry","boundingClientRect","top","isIntersecting","enter","leave","setTimeout","_ref3","_ref4","unobserve","_objectSpread","addMultipleClasses","removeEventListener","_this$observer","_this$resetObserver"],"mappings":"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"}